#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Colors for output
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

echo "${YELLOW}📝 Running pre-commit checks...${NC}"

# Run Prettier on staged files
echo "${YELLOW}🎨 Running Prettier...${NC}"
if ! npx prettier --check "**/*.{js,jsx,ts,tsx,json,css,scss,md}"; then
  echo "${RED}❌ Prettier check failed. Run 'npm run format' to fix formatting issues.${NC}"
  exit 1
fi

# Check TypeScript types
echo "${YELLOW}🔍 Running TypeScript type check...${NC}"
if ! npx tsc --noEmit; then
  echo "${RED}❌ TypeScript check failed. Please fix the type errors.${NC}"
  exit 1
fi

echo "${GREEN}✅ All checks passed!${NC}"