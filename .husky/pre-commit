#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit checks..."

# Run TypeScript type checking first
echo "ğŸ“ Running type checking..."
npm run check || {
  echo "âŒ Type checking failed. Please fix the TypeScript errors before committing."
  exit 1
}

# Run prettier, eslint, and tests through lint-staged
echo "ğŸ¨ Running formatting and linting..."
npx lint-staged || {
  echo "âŒ Code style checks failed. Please fix the errors and try committing again."
  exit 1
}

# Success message
echo "âœ… All pre-commit checks passed!"
